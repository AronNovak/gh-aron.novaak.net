!function(o,l){l.behaviors.fileValidateAutoAttach={attach:function(e,i){var a=o(e),t=void 0;i.file&&i.file.elements&&(t=i.file.elements,Object.keys(t).forEach(function(e){a.find(e).once("fileValidate").on("change.fileValidate",{extensions:t[e]},l.file.validateExtension)}))},detach:function(e,i,a){var t=o(e),n=void 0;"unload"===a&&i.file&&i.file.elements&&(n=i.file.elements,Object.keys(n).forEach(function(e){t.find(e).removeOnce("fileValidate").off("change.fileValidate",l.file.validateExtension)}))}},l.behaviors.fileAutoUpload={attach:function(e){o(e).find('input[type="file"]').once("auto-file-upload").on("change.autoFileUpload",l.file.triggerUploadButton)},detach:function(e,i,a){"unload"===a&&o(e).find('input[type="file"]').removeOnce("auto-file-upload").off(".autoFileUpload")}},l.behaviors.fileButtons={attach:function(e){var i=o(e);i.find(".js-form-submit").on("mousedown",l.file.disableFields),i.find(".js-form-managed-file .js-form-submit").on("mousedown",l.file.progressBar)},detach:function(e,i,a){if("unload"===a){var t=o(e);t.find(".js-form-submit").off("mousedown",l.file.disableFields),t.find(".js-form-managed-file .js-form-submit").off("mousedown",l.file.progressBar)}}},l.behaviors.filePreviewLinks={attach:function(e){o(e).find("div.js-form-managed-file .file a").on("click",l.file.openInNewWindow)},detach:function(e){o(e).find("div.js-form-managed-file .file a").off("click",l.file.openInNewWindow)}},l.file=l.file||{validateExtension:function(e){e.preventDefault(),o(".file-upload-js-error").remove();var i=e.data.extensions.replace(/,\s*/g,"|");if(1<i.length&&0<this.value.length&&!new RegExp("\\.("+i+")$","gi").test(this.value)){var a=l.t("The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.",{"%filename":this.value.replace("C:\\fakepath\\",""),"%extensions":i.replace(/\|/g,", ")});o(this).closest("div.js-form-managed-file").prepend('<div class="messages messages--error file-upload-js-error" aria-live="polite">'+a+"</div>"),this.value="",e.stopImmediatePropagation()}},triggerUploadButton:function(e){o(e.target).closest(".js-form-managed-file").find('.js-form-submit[data-drupal-selector$="upload-button"]').trigger("mousedown")},disableFields:function(){var e=o(this);e.trigger("formUpdated");var i=[];0<e.closest("div.js-form-managed-file").length&&(i=e.closest("div.js-form-managed-file").find("input.js-form-file"));var a=o("div.js-form-managed-file input.js-form-file").not(i).not(":disabled");a.prop("disabled",!0),setTimeout(function(){a.prop("disabled",!1)},1e3)},progressBar:function(){var e=o(this),i=e.closest("div.js-form-managed-file").find("input.file-progress");if(i.length){var a=i.attr("name");i.attr("name",a.match(/APC_UPLOAD_PROGRESS|UPLOAD_IDENTIFIER/)[0]),setTimeout(function(){i.attr("name",a)},1e3)}setTimeout(function(){e.closest("div.js-form-managed-file").find("div.ajax-progress-bar").slideDown()},500),e.trigger("fileUpload")},openInNewWindow:function(e){e.preventDefault(),o(this).attr("target","_blank"),window.open(this.href,"filePreview","toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,width=500,height=550")}}}(jQuery,Drupal);