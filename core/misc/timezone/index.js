!function(r,z){z.behaviors.setTimezone={attach:function(e){var t=r(e).find(".timezone-detect").once("timezone");if(t.length){var a=Date(),n=a.match(/\(([A-Z]{3,5})\)/),i=n?n[1]:0,o=new Date,s=-60*o.getTimezoneOffset(),f=new Date(o.getFullYear(),0,1,12,0,0,0),c=new Date(o.getFullYear(),6,1,12,0,0,0),m=-60*f.getTimezoneOffset(),u=-60*c.getTimezoneOffset(),l="system/timezone/"+i+"/"+s+"/"+(m==u?"":Math.max(m,u)===s?1:0);r.ajax({async:!1,url:z.url(l),data:{date:a},dataType:"json",success:function(e){e&&t.val(e)}})}}}}(jQuery,Drupal);