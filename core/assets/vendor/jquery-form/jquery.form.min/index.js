!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),r(t),t}:r(jQuery)}(function(q){"use strict";function i(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),q(e.target).closest("form").ajaxSubmit(t))}function o(e){var t=e.target,r=q(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n=t.form;if("image"===(n.clk=t).type)if(void 0!==e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof q.fn.offset){var i=r.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function _(){if(q.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var p=/\r?\n/g,w={};w.fileapi=void 0!==q('<input type="file">').get(0).files,w.formdata=void 0!==window.FormData;var N=!!q.fn.prop;q.fn.attr2=function(){if(!N)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},q.fn.ajaxSubmit=function(M,e,t,r){function a(e){function l(t){var r=null;try{t.contentWindow&&(r=t.contentWindow.document)}catch(t){_("cannot get iframe.contentWindow document: "+t)}if(r)return r;try{r=t.contentDocument?t.contentDocument:t.document}catch(e){_("cannot get iframe.contentDocument: "+e),r=t.document}return r}function t(){var e=X.attr2("target"),t=X.attr2("action"),r=X.attr("enctype")||X.attr("encoding")||"multipart/form-data";s.setAttribute("target",i),O&&!/post/i.test(O)||s.setAttribute("method","POST"),t!==d.url&&s.setAttribute("action",d.url),d.skipEncodingOverride||O&&!/post/i.test(O)||X.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(x=setTimeout(function(){g=!0,f(b)},d.timeout));var a=[];try{if(d.extraData)for(var n in d.extraData)d.extraData.hasOwnProperty(n)&&(q.isPlainObject(d.extraData[n])&&d.extraData[n].hasOwnProperty("name")&&d.extraData[n].hasOwnProperty("value")?a.push(q('<input type="hidden" name="'+d.extraData[n].name+'">',u).val(d.extraData[n].value).appendTo(s)[0]):a.push(q('<input type="hidden" name="'+n+'">',u).val(d.extraData[n]).appendTo(s)[0]));d.iframeTarget||m.appendTo(c),h.attachEvent?h.attachEvent("onload",f):h.addEventListener("load",f,!1),setTimeout(function e(){try{var t=l(h).readyState;_("state = "+t),t&&"uninitialized"===t.toLowerCase()&&setTimeout(e,50)}catch(t){_("Server abort: ",t," (",t.name,")"),f(T),x&&clearTimeout(x),x=void 0}},15);try{s.submit()}catch(e){document.createElement("form").submit.apply(s)}}finally{s.setAttribute("action",t),s.setAttribute("enctype",r),e?s.setAttribute("target",e):X.removeAttr("target"),q(a).remove()}}function f(e){if(!v.aborted&&!D){if((k=l(h))||(_("cannot access response document"),e=T),e===b&&v)return v.abort("timeout"),void y.reject(v,"timeout");if(e===T&&v)return v.abort("server abort"),void y.reject(v,"error","server abort");if(k&&k.location.href!==d.iframeSrc||g){h.detachEvent?h.detachEvent("onload",f):h.removeEventListener("load",f,!1);var t,r="success";try{if(g)throw"timeout";var a="xml"===d.dataType||k.XMLDocument||q.isXMLDoc(k);if(_("isXml="+a),!a&&window.opera&&(null===k.body||!k.body.innerHTML)&&--A)return _("requeing onLoad callback, DOM not available"),void setTimeout(f,250);var n=k.body?k.body:k.documentElement;v.responseText=n?n.innerHTML:null,v.responseXML=k.XMLDocument?k.XMLDocument:k,a&&(d.dataType="xml"),v.getResponseHeader=function(e){return{"content-type":d.dataType}[e.toLowerCase()]},n&&(v.status=Number(n.getAttribute("status"))||v.status,v.statusText=n.getAttribute("statusText")||v.statusText);var i=(d.dataType||"").toLowerCase(),o=/(json|script|text)/.test(i);if(o||d.textarea){var s=k.getElementsByTagName("textarea")[0];if(s)v.responseText=s.value,v.status=Number(s.getAttribute("status"))||v.status,v.statusText=s.getAttribute("statusText")||v.statusText;else if(o){var u=k.getElementsByTagName("pre")[0],c=k.getElementsByTagName("body")[0];u?v.responseText=u.textContent?u.textContent:u.innerText:c&&(v.responseText=c.textContent?c.textContent:c.innerText)}}else"xml"===i&&!v.responseXML&&v.responseText&&(v.responseXML=L(v.responseText));try{S=E(v,i,d)}catch(e){r="parsererror",v.error=t=e||r}}catch(e){_("error caught: ",e),r="error",v.error=t=e||r}v.aborted&&(_("upload aborted"),r=null),v.status&&(r=200<=v.status&&v.status<300||304===v.status?"success":"error"),"success"===r?(d.success&&d.success.call(d.context,S,"success",v),y.resolve(v.responseText,"success",v),p&&q.event.trigger("ajaxSuccess",[v,d])):r&&(void 0===t&&(t=v.statusText),d.error&&d.error.call(d.context,v,r,t),y.reject(v,"error",t),p&&q.event.trigger("ajaxError",[v,d,t])),p&&q.event.trigger("ajaxComplete",[v,d]),p&&!--q.active&&q.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,v,r),D=!0,d.timeout&&clearTimeout(x),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),v.responseXML=null},100)}}}var r,a,d,p,i,m,h,v,n,o,g,x,s=X[0],y=q.Deferred();if(y.abort=function(e){v.abort(e)},e)for(a=0;a<C.length;a++)r=q(C[a]),N?r.prop("disabled",!1):r.removeAttr("disabled");(d=q.extend(!0,{},q.ajaxSettings,M)).context=d.context||d,i="jqFormIO"+(new Date).getTime();var u=s.ownerDocument,c=X.closest("body");if(d.iframeTarget?(o=(m=q(d.iframeTarget,u)).attr2("name"))?i=o:m.attr2("name",i):(m=q('<iframe name="'+i+'" src="'+d.iframeSrc+'" />',u)).css({position:"absolute",top:"-1000px",left:"-1000px"}),h=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";_("aborting upload... "+t),this.aborted=1;try{h.contentWindow.document.execCommand&&h.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",d.iframeSrc),v.error=t,d.error&&d.error.call(d.context,v,t,e),p&&q.event.trigger("ajaxError",[v,d,t]),d.complete&&d.complete.call(d.context,v,t)}},(p=d.global)&&0==q.active++&&q.event.trigger("ajaxStart"),p&&q.event.trigger("ajaxSend",[v,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,v,d))return d.global&&q.active--,y.reject(),y;if(v.aborted)return y.reject(),y;(n=s.clk)&&(o=n.name)&&!n.disabled&&(d.extraData=d.extraData||{},d.extraData[o]=n.value,"image"===n.type&&(d.extraData[o+".x"]=s.clk_x,d.extraData[o+".y"]=s.clk_y));var b=1,T=2,j=q("meta[name=csrf-token]").attr("content"),w=q("meta[name=csrf-param]").attr("content");w&&j&&(d.extraData=d.extraData||{},d.extraData[w]=j),d.forceSync?t():setTimeout(t,10);var S,k,D,A=50,L=q.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},F=q.parseJSON||function(e){return window.eval("("+e+")")},E=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n=("xml"===t||!t)&&0<=a.indexOf("xml"),i=n?e.responseXML:e.responseText;return n&&"parsererror"===i.documentElement.nodeName&&q.error&&q.error("parsererror"),r&&r.dataFilter&&(i=r.dataFilter(i,t)),"string"==typeof i&&(("json"===t||!t)&&0<=a.indexOf("json")?i=F(i):("script"===t||!t)&&0<=a.indexOf("javascript")&&q.globalEval(i)),i};return y}if(!this.length)return _("ajaxSubmit: skipping submit process - no element selected"),this;var O,n,i,X=this;"function"==typeof M?M={success:M}:"string"==typeof M||!1===M&&0<arguments.length?(M={url:M,data:e,dataType:t},"function"==typeof r&&(M.success=r)):void 0===M&&(M={}),O=M.method||M.type||this.attr2("method"),(i=(i="string"==typeof(n=M.url||this.attr2("action"))?q.trim(n):"")||window.location.href||"")&&(i=(i.match(/^([^#]+)/)||[])[1]),M=q.extend(!0,{url:i,success:q.ajaxSettings.success,type:O||q.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},M);var o={};if(this.trigger("form-pre-serialize",[this,M,o]),o.veto)return _("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(M.beforeSerialize&&!1===M.beforeSerialize(this,M))return _("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var s=M.traditional;void 0===s&&(s=q.ajaxSettings.traditional);var u,C=[],c=this.formToArray(M.semantic,C,M.filtering);if(M.data){var l=q.isFunction(M.data)?M.data(c):M.data;M.extraData=l,u=q.param(l,s)}if(M.beforeSubmit&&!1===M.beforeSubmit(c,this,M))return _("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[c,this,M,o]),o.veto)return _("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=q.param(c,s);u&&(f=f?f+"&"+u:u),"GET"===M.type.toUpperCase()?(M.url+=(0<=M.url.indexOf("?")?"&":"?")+f,M.data=null):M.data=f;var d=[];if(M.resetForm&&d.push(function(){X.resetForm()}),M.clearForm&&d.push(function(){X.clearForm(M.includeHidden)}),!M.dataType&&M.target){var p=M.success||function(){};d.push(function(e,t,r){var a=arguments,n=M.replaceTarget?"replaceWith":"html";q(M.target)[n](e).each(function(){p.apply(this,a)})})}else M.success&&(q.isArray(M.success)?q.merge(d,M.success):d.push(M.success));if(M.success=function(e,t,r){for(var a=M.context||this,n=0,i=d.length;n<i;n++)d[n].apply(a,[e,t,r||X,X])},M.error){var m=M.error;M.error=function(e,t,r){var a=M.context||this;m.apply(a,[e,t,r,X])}}if(M.complete){var h=M.complete;M.complete=function(e,t){var r=M.context||this;h.apply(r,[e,t,X])}}var v=0<q("input[type=file]:enabled",this).filter(function(){return""!==q(this).val()}).length,g="multipart/form-data",x=X.attr("enctype")===g||X.attr("encoding")===g,y=w.fileapi&&w.formdata;_("fileAPI :"+y);var b,T=(v||x)&&!y;!1!==M.iframe&&(M.iframe||T)?M.closeKeepAlive?q.get(M.closeKeepAlive,function(){b=a(c)}):b=a(c):b=(v||x)&&y?function(e){for(var r=new FormData,t=0;t<e.length;t++)r.append(e[t].name,e[t].value);if(M.extraData){var a=function(e){var t,r,a=q.param(e,M.traditional).split("&"),n=a.length,i=[];for(t=0;t<n;t++)a[t]=a[t].replace(/\+/g," "),r=a[t].split("="),i.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return i}(M.extraData);for(t=0;t<a.length;t++)a[t]&&r.append(a[t][0],a[t][1])}M.data=null;var n=q.extend(!0,{},q.ajaxSettings,M,{contentType:!1,processData:!1,cache:!1,type:O||"POST"});M.uploadProgress&&(n.xhr=function(){var e=q.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,a=e.total;e.lengthComputable&&(t=Math.ceil(r/a*100)),M.uploadProgress(e,r,a,t)},!1),e}),n.data=null;var i=n.beforeSend;return n.beforeSend=function(e,t){M.formData?t.data=M.formData:t.data=r,i&&i.call(this,e,t)},q.ajax(n)}(c):q.ajax(M),X.removeData("jqxhr").data("jqxhr",b);for(var j=0;j<C.length;j++)C[j]=null;return this.trigger("form-submit-notify",[this,M]),this},q.fn.ajaxForm=function(e,t,r,a){if(("string"==typeof e||!1===e&&0<arguments.length)&&(e={url:e,data:t,dataType:r},"function"==typeof a&&(e.success=a)),(e=e||{}).delegation=e.delegation&&q.isFunction(q.fn.on),e.delegation||0!==this.length)return e.delegation?(q(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,e,i).on("click.form-plugin",this.selector,e,o),this):this.ajaxFormUnbind().on("submit.form-plugin",e,i).on("click.form-plugin",e,o);var n={s:this.selector,c:this.context};return!q.isReady&&n.s?(_("DOM not ready, queuing ajaxForm"),q(function(){q(n.s,n.c).ajaxForm(e)})):_("terminating; zero elements found by selector"+(q.isReady?"":" (DOM not ready)")),this},q.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},q.fn.formToArray=function(e,t,r){var a=[];if(0===this.length)return a;var n,i,o,s,u,c,l,f,d=this[0],p=this.attr("id"),m=e||void 0===d.elements?d.getElementsByTagName("*"):d.elements;if(m=m&&q.makeArray(m),p&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(n=q(':input[form="'+p+'"]').get()).length&&(m=(m||[]).concat(n)),!m||!m.length)return a;for(q.isFunction(r)&&(m=q.map(m,r)),i=0,l=m.length;i<l;i++)if((s=(c=m[i]).name)&&!c.disabled)if(e&&d.clk&&"image"===c.type)d.clk===c&&(a.push({name:s,value:q(c).val(),type:c.type}),a.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}));else if((u=q.fieldValue(c,!0))&&u.constructor===Array)for(t&&t.push(c),o=0,f=u.length;o<f;o++)a.push({name:s,value:u[o]});else if(w.fileapi&&"file"===c.type){t&&t.push(c);var h=c.files;if(h.length)for(o=0;o<h.length;o++)a.push({name:s,value:h[o],type:c.type});else a.push({name:s,value:"",type:c.type})}else null!=u&&(t&&t.push(c),a.push({name:s,value:u,type:c.type,required:c.required}));if(!e&&d.clk){var v=q(d.clk),g=v[0];(s=g.name)&&!g.disabled&&"image"===g.type&&(a.push({name:s,value:v.val()}),a.push({name:s+".x",value:d.clk_x},{name:s+".y",value:d.clk_y}))}return a},q.fn.formSerialize=function(e){return q.param(this.formToArray(e))},q.fn.fieldSerialize=function(n){var i=[];return this.each(function(){var e=this.name;if(e){var t=q.fieldValue(this,n);if(t&&t.constructor===Array)for(var r=0,a=t.length;r<a;r++)i.push({name:e,value:t[r]});else null!=t&&i.push({name:this.name,value:t})}}),q.param(i)},q.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],i=q.fieldValue(n,e);null==i||i.constructor===Array&&!i.length||(i.constructor===Array?q.merge(t,i):t.push(i))}return t},q.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"===a||"button"===a||("checkbox"===a||"radio"===a)&&!e.checked||("submit"===a||"image"===a)&&e.form&&e.form.clk!==e||"select"===n&&-1===e.selectedIndex))return null;if("select"!==n)return q(e).val().replace(p,"\r\n");var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,u="select-one"===a,c=u?i+1:s.length,l=u?i:0;l<c;l++){var f=s[l];if(f.selected&&!f.disabled){var d=f.value;if(d=d||(f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),u)return d;o.push(d)}}return o},q.fn.clearForm=function(e){return this.each(function(){q("input,select,textarea",this).clearFields(e)})},q.fn.clearFields=q.fn.clearInputs=function(r){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();a.test(e)||"textarea"===t?this.value="":"checkbox"===e||"radio"===e?this.checked=!1:"select"===t?this.selectedIndex=-1:"file"===e?/MSIE/.test(navigator.userAgent)?q(this).replaceWith(q(this).clone(!0)):q(this).val(""):r&&(!0===r&&/hidden/.test(e)||"string"==typeof r&&q(this).is(r))&&(this.value="")})},q.fn.resetForm=function(){return this.each(function(){var t=q(this),e=this.tagName.toLowerCase();switch(e){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var r=t.parents("select");return r.length&&r[0].multiple?"option"===e?this.selected=this.defaultSelected:t.find("option").resetForm():r.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var a=q(t.attr("for")),n=t.find("input,select,textarea");return a[0]&&n.unshift(a[0]),n.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},q.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},q.fn.selected=function(r){return void 0===r&&(r=!0),this.each(function(){var e=this.type;if("checkbox"===e||"radio"===e)this.checked=r;else if("option"===this.tagName.toLowerCase()){var t=q(this).parent("select");r&&t[0]&&"select-one"===t[0].type&&t.find("option").selected(!1),this.selected=r}})},q.fn.ajaxSubmit.debug=!1});